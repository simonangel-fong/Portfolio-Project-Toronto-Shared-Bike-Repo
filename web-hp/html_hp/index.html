<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toronto Shared Bike Project</title>
    <link rel="shortcut icon" href="./img/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <!-- customized style sheet -->
    <link rel="stylesheet" href="./css/style.css">
    <!-- customized font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap">
</head>

<!-- enable scroll spy -->

<body data-bs-spy="scroll" data-bs-target=".navbar" data-bs-offset="50">

    <!-- Main -->
    <main class="container-fluid px-0">

        <!-- Dashboard -->
        <section id="da" class="container pb-5">

            <!-- Chart Title -->
            <div class="row pt-5">

                <!-- title text -->
                <h1 class="display-5 fw-bold text-body-emphasis text-center mb-3">
                    Data Analysis
                </h1>
                <hr class="border-5 border-top border-black col-2 col-md-3 mx-auto">
            </div>

            <!-- selector -->
            <div class="row">
                <!-- selector -->
                <div class="col-sm-6 mx-auto">
                    <select id="year-selector" class="form-select form-select-sm mb-3">
                        <option value="trip-month-annual" selected>Annual Member - Monthly Pattern</option>
                        <option value="trip-hour-annual">Annual Member - Hourly Pattern</option>
                        <option value="trip-month-casual">Casual Member - Monthly Pattern</option>
                        <option value="trip-hour-casual">Casual Member - Hourly Pattern</option>
                        <option value="bike">Bike Count Over Years</option>
                        <option value="station">Station Count Over Years</option>
                    </select>
                </div>

                <!-- chart -->
                <div class="row">
                    <div id="chart-container" class="p-4 mx-auto text-center" style="width: 800px;height: 450px;"></div>
                </div>
            </div>

        </section>

    </main>

    <!-- footer -->
    <footer class="container py-1">
        <p class="float-end"><a href="#">Back to top</a></p>
        <p>&copy; 2025 <a href="https://www.arguswatcher.net">Arguswatcher</a> </p>
    </footer>

    <!-- bootstrap js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js"
        integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D"
        crossorigin="anonymous"></script>

    <!-- echarts js -->
    <script src="https://echarts.apache.org/en/js/vendors/echarts/dist/echarts.min.js"></script>
    <script src="./js/charts.js"></script>
    <script>
        const DOMAIN = "trip-hp.arguswatcher.net";
        const STAG = "hp";

        document.addEventListener('DOMContentLoaded', () => {
            const sel = document.getElementById('year-selector');
            if (!sel) return;

            const handleChange = () => {
                const value = sel.value;

                // call function based on values
                switch (value) {
                    case "station":
                        chartStation({ url: `https://${DOMAIN}/${STAG}/station` });
                        break;
                    case "trip-month-annual":
                        chartTripMonth({ url: `https://${DOMAIN}/${STAG}/trip-month?user=annual`, title: "Monthly Pattern - Annual Member" });
                        break;
                    case "trip-month-casual":
                        chartTripMonth({ url: `https://${DOMAIN}/${STAG}/trip-month?user=casual`, title: "Monthly Pattern - Casual Member" });
                        break;
                    case "trip-hour-annual":
                        chartTripHour({ url: `https://${DOMAIN}/${STAG}/trip-hour?user=annual`, title: "Hourly Pattern - Annual Member" });
                        break;
                    case "trip-hour-casual":
                        chartTripHour({ url: `https://${DOMAIN}/${STAG}/trip-hour?user=casual`, title: "Hourly Pattern - Casual Member" });
                        break;
                    default:
                        // bike
                        chartBike({ url: `https://${DOMAIN}/${STAG}/bike` });
                }
            }

            sel.addEventListener('change', handleChange);
            handleChange();
        });
    </script>
</body>

</html>